# Plan folder

This folder holds **historical plans** (design docs, migration notes, feature plans). When we create or finalize a plan, we keep a copy here for reference.

## Plans

- [add-pwa-serwist-turbopack.plan.md](./add-pwa-serwist-turbopack.plan.md) — PWA with Serwist (Turbopack) for offline Fumadocs
- [ingest-sources-ontology_pipeline_b140f79c.plan.md](./ingest-sources-ontology_pipeline_b140f79c.plan.md) — Ingest → sources → ontology pipeline

---

## Developer notes

Notes for anyone working on the repo or debugging build/dev.

### Build and dev (Next.js 16)

- **`pnpm run dev`** uses **Turbopack** (Next 16 default). Fast local dev.
- **`pnpm run build`** uses **Webpack** (`next build --webpack`). We opt out of Turbopack for production builds because **@serwist/turbopack** currently fails during “Collecting page data” when Next 16 uses Turbopack for build. Serwist’s route handler works with Webpack. When Serwist supports Next 16’s Turbopack build, we can drop the `--webpack` flag.

### Stack

- **Next.js** 16, **React** 19
- **Fumadocs** 16 (fumadocs-ui, fumadocs-core); fumadocs-mdx 14 (no v16)
- **Tailwind** v4, CSS-first config; Fumadocs theme via `fumadocs-ui/css/neutral.css` + `preset.css`
- **Twoslash** (fumadocs-twoslash) for TypeScript code blocks in MDX
- **Serwist** (@serwist/turbopack) for PWA / offline

### Fumadocs v16 import paths

- Root provider: `fumadocs-ui/provider/next` (not `fumadocs-ui/provider`)
- Docs layout: `fumadocs-ui/layouts/docs` (not `fumadocs-ui/layout`)

### Where content lives

- **Source of truth:** `src/sources/` and ontology in `.cursor/rules/ontology.mdc`
- **Derived output:** `content/` (Fumadocs) — generated by the `update-docs` skill; do not edit by hand for anything that should stay in sync with sources.

---

*Add new dev notes here as we capture them.*
